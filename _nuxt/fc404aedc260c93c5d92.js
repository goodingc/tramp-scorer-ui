(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{179:function(t,e,n){(function(n){var o,r,l;r=[],void 0===(l="function"==typeof(o=function(){"use strict";function e(b,t,e){var n=new XMLHttpRequest;n.open("GET",b),n.responseType="blob",n.onload=function(){a(n.response,t,e)},n.onerror=function(){console.error("could not download file")},n.send()}function o(a){var b=new XMLHttpRequest;b.open("HEAD",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function r(a){try{a.dispatchEvent(new MouseEvent("click"))}catch(t){var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var l="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,a=l.saveAs||("object"!=typeof window||window!==l?function(){}:"download"in HTMLAnchorElement.prototype?function(b,g,t){var i=l.URL||l.webkitURL,n=document.createElement("a");g=g||b.name||"download",n.download=g,n.rel="noopener","string"==typeof b?(n.href=b,n.origin===location.origin?r(n):o(n.href)?e(b,g,t):r(n,n.target="_blank")):(n.href=i.createObjectURL(b),setTimeout((function(){i.revokeObjectURL(n.href)}),4e4),setTimeout((function(){r(n)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,g,n){if(g=g||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(a,b){return void 0===b?b={autoBom:!1}:"object"!=typeof b&&(console.warn("Deprecated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\ufeff",a],{type:a.type}):a}(t,n),g);else if(o(t))e(t,g,n);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout((function(){r(i)}))}}:function(a,b,t,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),"string"==typeof a)return e(a,b,t);var g="application/octet-stream"===a.type,o=/constructor/i.test(l.HTMLElement)||l.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||g&&o)&&"object"==typeof FileReader){var r=new FileReader;r.onloadend=function(){var a=r.result;a=i?a:a.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=a:location=a,n=null},r.readAsDataURL(a)}else{var c=l.URL||l.webkitURL,d=c.createObjectURL(a);n?n.location=d:location.href=d,n=null,setTimeout((function(){c.revokeObjectURL(d)}),4e4)}});l.saveAs=a.saveAs=a,t.exports=a})?o.apply(e,r):o)||(t.exports=l)}).call(this,n(37))},180:function(t,e,n){"use strict";n.r(e);n(3),n(58),n(2),n(15),n(20),n(21),n(1),n(131),n(77),n(12),n(38),n(44);var o=n(7),r=n(179);function l(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))){var i=0,e=function(){};return{s:e,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,r=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){l=!0,o=t},f:function(){try{r||null==n.return||n.return()}finally{if(l)throw o}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var d=o.default.extend({data:function(){return{validEnv:!1,stats:null,shapeOptions:[{value:"UNKNOWN",text:"Unknown"},{value:"STRAIGHT",text:"Straight"},{value:"TUCK",text:"Tuck"},{value:"PIKE",text:"Pike"}],skillTableFields:[{key:"ss",label:"Somersaults"},"twists","shape",{label:"FIG",key:"fig"},{key:"dd",label:"Tariff"},{key:"tof",label:"ToF"}]}},methods:{readEnvironment:function(t){var e=this;if(null!==t.target&&null!==t.target.files){for(var n=Array.from(t.target.files),o=null,r=0,c=n;r<c.length;r++){var d=c[r];if("stats.json"===d.name){o=d;break}}if(o){var f=function(t){return URL.createObjectURL(n.find((function(e){return e.name===t})))},v=new FileReader;v.onload=function(t){if(null!==t.target&&"string"==typeof t.target.result){var n=JSON.parse(t.target.result),o=f(n.sourceName);if(o){n.sourceFile=o;var r,c=l(n.skills);try{for(c.s();!(r=c.n()).done;){var d=r.value,v=f(d.videoName);if(!v)return void(e.validEnv=!1);d.videoFile=v,d.videoPlayer=null,d.ss=d.ss||Math.abs(Math.round(d.angle/90)),d.twists=d.twists||"0".repeat(Math.max(Math.ceil(d.ss/4),1)),d.skipped=void 0!==d.skipped&&d.skipped}}catch(t){c.e(t)}finally{c.f()}e.validEnv=!0,n.armsetIndex=void 0===n.armsetIndex?-1:n.armsetIndex,e.stats=n}else e.validEnv=!1}},v.readAsText(o)}else this.validEnv=!1}},playSkills:function(){for(var t=this,e=function(e){t.stats.skills[e].videoPlayer.onended=function(){return t.stats.skills[e+1].videoPlayer.play()}},n=0;n<this.stats.skills.length-1;n++)e(n);this.stats.skills[this.stats.skills.length-1].videoPlayer.onended=function(){for(var e=0;e<t.stats.skills.length;e++)t.stats.skills[e].videoPlayer.onended=null},this.stats.skills[0].videoPlayer.play()},getFig:function(t){var e="?";switch(t.shape){case"STRAIGHT":e="/";break;case"TUCK":e="o";break;case"PIKE":e="<";break;case"STRADDLE":e="V"}return t.ss.toString()+" "+t.twists.split("0").join("-")+" "+e},getDd:function(t){if(0===t.ss)return 0;var dd=0;dd+=.1*t.ss,dd+=.1*Math.floor(t.ss/4),t.ss>=12&&(dd+=.1*Math.floor((t.ss-8)/4));var e=t.twists.split("").reduce((function(t,e){return t+parseInt(e)}),0);return dd+=.1*e,t.ss>3&&(t.ss<8?0!==e||"STRAIGHT"!==t.shape&&"PIKE"!==t.shape||(dd+=.1):"STRAIGHT"!==t.shape&&"PIKE"!==t.shape||(dd+=.1*Math.floor(t.ss/4))),Math.floor(10*dd)/10},exportStats:function(){var t={armsetIndex:this.stats.armsetIndex,sourceName:this.stats.sourceName,skills:this.stats.skills.map((function(t){return{ys:t.ys,angle:t.angle,shape:t.shape,videoName:t.videoName,twists:t.twists,ss:t.ss,skipped:t.skipped}}))},e=new Blob([JSON.stringify(t)],{type:"application/json"});Object(r.saveAs)(e,"stats.json")}},computed:{routineSkills:function(){var t=this;return-1===this.stats.armsetIndex?[]:this.stats.skills.filter((function(t){return!t.skipped})).slice(this.stats.armsetIndex+1,this.stats.armsetIndex+11).map((function(e){return e.dd=t.getDd(e),e.fig=t.getFig(e),e.videoPlayer&&(e.tof=e.videoPlayer.duration),e}))},totalDd:function(){return Math.floor(10*this.routineSkills.reduce((function(t,e){return t+e.dd}),0))/10},totalTof:function(){return Math.floor(2e3*this.routineSkills.reduce((function(t,e){return t+e.tof}),0))/2e3}}}),f=n(41),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-navbar",{staticClass:"mb-2",attrs:{variant:"light"}},[n("b-form-file",{attrs:{state:t.validEnv,placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here...",type:"file",webkitdirectory:"",directory:"",multiple:""},on:{change:t.readEnvironment}})],1),t._v(" "),t.validEnv?n("b-col",{attrs:{cols:"12"}},[n("b-row",{staticClass:"mb-2"},[n("b-col",{attrs:{cols:"8"}},[n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("b-navbar",[n("b-button-toolbar",[n("b-button",{on:{click:t.playSkills}},[t._v("Play skills in sequence")]),t._v(" "),n("b-button",{on:{click:t.exportStats}},[t._v("Export stats.json")]),t._v(" "),n("b-input-group",[n("b-input-group-text",[t._v("\n                    Total DD: "+t._s(t.totalDd)+"\n                  ")]),t._v(" "),n("b-input-group-text",[t._v("\n                    Total ToF: "+t._s(t.totalTof)+"\n                  ")])],1)],1)],1)],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("b-table-lite",{attrs:{small:"",items:t.routineSkills,fields:t.skillTableFields}})],1)],1)],1),t._v(" "),n("b-col",{attrs:{cols:"4"}},[n("b-card",{attrs:{header:"Source"}},[n("video",{attrs:{width:"100%",controls:"",muted:"",src:t.stats.sourceFile},domProps:{muted:!0}})])],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("b-card",{attrs:{header:"Skills"}},t._l(t.stats.skills,(function(e,o){return n("div",{key:o,staticClass:"mb-2",staticStyle:{width:"150px",display:"inline-block"}},[n("video",{ref:"skillVideo",refInFor:!0,attrs:{width:"100%",src:e.videoFile},on:{click:function(t){return t.target.play()},canplay:function(t){e.videoPlayer=t.target}}}),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("b-input-group",{attrs:{size:"sm",prepend:"S/S"}},[n("b-input",{attrs:{type:"number"},model:{value:e.ss,callback:function(n){t.$set(e,"ss",n)},expression:"skill.ss"}})],1)],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("b-input-group",{attrs:{size:"sm",prepend:"Shape"}},[n("b-form-select",{attrs:{options:t.shapeOptions},model:{value:e.shape,callback:function(n){t.$set(e,"shape",n)},expression:"skill.shape"}})],1)],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("b-input-group",{attrs:{size:"sm",prepend:"Twists"}},[n("b-input",{attrs:{type:"text"},model:{value:e.twists,callback:function(n){t.$set(e,"twists",n)},expression:"skill.twists"}})],1)],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("b-button",{staticClass:"w-100",attrs:{variant:t.stats.armsetIndex===o?"primary":"secondary"},on:{click:function(e){t.stats.armsetIndex=o}}},[t._v("\n                  Set as Armset\n                ")])],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("b-button",{staticClass:"w-100",attrs:{pressed:e.skipped,variant:"danger"},on:{"update:pressed":function(n){return t.$set(e,"skipped",n)}}},[t._v("\n                  Skip skill\n                ")])],1)],1)],1)})),0)],1)],1)],1):t._e()],1)}),[],!1,null,null,null);e.default=component.exports}}]);